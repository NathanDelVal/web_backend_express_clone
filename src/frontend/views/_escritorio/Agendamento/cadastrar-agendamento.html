<!DOCTYPE html>
<html lang="pt-br">
<!--HEADER-->

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../images/icon/apple-icon-mezzomo.png">
    <link rel="icon" type="image/png" href="../images/icon/favicon_mezzomo3.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        Robotax: Agendamento
    </title>
    <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
    <!-- Fonts and icons -->
    <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!--Custom CSS styles-->
    <link rel="stylesheet" type="text/css" href="../local/style-cadastrar-escritorio.css">
    <!--SWEET ALERT-->
    <link rel="stylesheet" href="../local/plugins/sweetalert/css/sweetalert2.min.css" id="theme-styles">
    
    <script src="../assets/js/core/jquery-3.5.1.js"></script>

</head>
<!--HEADER_X-->

<body class="off-canvas-sidebar header-filter" filter-color="yellow" style="overflow: auto;">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-transparent text-white">
        
        <div class="navbar-wrapper">
            <a href="/" style="margin-left: 2rem;">
                <div class="container" style="display: flex; flex-direction: column;">
                    <img src="../images/logo-black-fixed.svg" style="height: 6rem">
                    <img src="../images/maintittle.svg" style="height: 1rem; margin-top: .5rem;">
                    <!-- <span class="txt-rotate" style="font-weight: 800; margin-left: 0.5rem; color: white;" data-period="2000"
                    data-rotate='[ "Antecipados", "Robô Fiscal", "Documentos", "Robô Contábil", "Notas Fiscais"]'></span> -->
                </div>
            </a>
        </div>
        <div class="container">    
            <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="sr-only">Toggle navigation</span>
                <span class="navbar-toggler-icon icon-bar"></span>
                <span class="navbar-toggler-icon icon-bar"></span>
                <span class="navbar-toggler-icon icon-bar"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end">
                <ul class="navbar-nav">
                    <li class="nav-item  active">
                        <a href="/acesso" class="nav-link">
                            <i class="material-icons">redo</i> Acesso
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="wrapper wrapper-full-page" style="z-index: 2;">
        <div class="page-header cadastro-page">
            <div class="container login-page">
                <div class="row">
                    <div data-aos="fade-down" class="col-lg-12 ml-auto mr-auto">
                        <div id="card-principal" class="card card-login card-cadastro card-hidden wizard-card"
                            data-color="red" id="wizard">
                            <div class="card-header card-header-black text-center">
                                <h2 class="card-title text-center">Agende sua Demonstração</h2>
                            </div>

                            <div class="card-body" id="card-cadastro">
                                <div class="row align-items-center ">
                                    <div class="col-lg-12">
                                        <!--/cadastro-agendamento/confirmar-cadastro modificar a rota-->
                                        <form id="formulario_agendamento" class="form" method="post"
                                            action="/cadastro-agendamento/confirmar-cadastro">
                                            <div class="container">
                                                <h4 class="info-title text-center">Seus dados pessoais</h4>
                                                <div class="row">
                                                    <div class="col-lg-4">
                                                        <div class="form-group has-default">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text"><i
                                                                            class="material-icons">face</i></span>
                                                                </div>
                                                                <input type='text' class="form-control" id='nome_completo' autocomplete="nope"
                                                                    name="nome_completo" placeholder="Informe o seu nome" oninput="this.className=''" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="form-group has-default">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text"><i
                                                                            class="material-icons">mail</i></span>
                                                                </div>
                                                                <input type="text" id="email" name="email" autocomplete="off" class="form-control" placeholder="Email para contato"
                                                                    oninput="this.className=''">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <div class="form-group has-default">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text"><i
                                                                            class="material-icons">perm_phone_msg</i></span>
                                                                </div>
                                                                <input id="numero_contato" name="numero_contato" autocomplete="nope"
                                                                    type="text" class="form-control" placeholder="Telefone para contato"
                                                                    oninput="this.className=''" onkeypress="$(this).mask('(00) 0000-00009')">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-4 mt-2">
                                                        <div class="form-group has-default">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text"><i
                                                                            class="material-icons">badge</i></span>
                                                                </div>
                                                                <input id="cpf" name="cpf" type="text" autocomplete="off"
                                                                    class="form-control" minlength="14" maxlength="14" onkeypress="$(this).mask('000.000.000-00');" placeholder="Informe o seu CPF"
                                                                    oninput="this.className=''">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <h4 class="info-title text-center mt-3">Dados da sua empresa</h4>
                                                <div class="row">
                                                                                                        
                                                    <div class="col-lg-4">
                                                        <div class="form-group has-default">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text"><i class="material-icons">payment</i></span>
                                                                </div>
                                                                <input id="cnpj" name="cnpj" type="text" class="form-control" placeholder="CNPJ" autocomplete="off"
                                                                    onchange="onChangeCNPJ(this)" oninput="this.className=''"
                                                                    onkeypress="$(this).mask('00.000.000/0000-00')">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="col-lg-4">
                                                        <div class="form-group has-default">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text"><i class="material-icons">perm_identity</i></span>
                                                                </div>
                                                                <input id="new_razao" name="razao_social" type="text" class="form-control" autocomplete="off"
                                                                    placeholder="Razão Social" oninput="this.className=''">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="col-lg-4">
                                                        <div class="form-group has-default">
                                                            <div class="input-group">
                                                                <div class="input-group-prepend">
                                                                    <span class="input-group-text"><i class="material-icons">schedule</i></span>
                                                                </div>
                                                                <textarea class="form-control" placeholder="Horário de disponibilidade" id="disponibilidade"
                                                                    name="disponibilidade" rows="2"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card-footer">
                                <div class="text-right">
                                    <button class="btn-cadastro btn-black btn" form="formulario_agendamento" type="submit">Enviar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{> escritorio/footer_outside}}
    </div>

    <!--Correção do Violation Scroll non-passive event-->
    <script src=" ../local/plugins/fix-non-passive.js"></script>
    <!-- Core JS Files -->
    <!--mask https://www.blogson.com.br/como-formatar-campos-de-cpf-cep-telefone-e-moeda-com-jquery-jmask/-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
    <script src="../assets/js/core/popper.min.js"></script>
    <script src="../assets/js/core/bootstrap-material-design.js"></script>
    <script src="../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
    <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="../assets/js/material-dashboard.min.js " type="text/javascript"></script>
    <!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
    <!-- Notifications Plugin -->
    <script src="../assets/js/plugins/bootstrap-notify.js"></script>
    <!-- Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
    <script src="../assets/js/plugins/bootstrap-selectpicker.js"></script>
    <!--SWEET ALERT-->
    <script src="../local/plugins/sweetalert/js/sweetalert2.min.js"></script>

    <link rel="stylesheet" href="../local/plugins/sweetalert/css/sweetalert2.min.css" id="theme-styles">

    <script src="../assets/js/plugins/jquery.validate.min.js"></script>
    <script src="../assets/js/plugins/material-bootstrap-wizard.js"></script>
    <script src="../assets/js/plugins/jquery.bootstrap.js"></script>

    <!-- AJAX JQUERY POST UPDATE update_form_pendente MODAL -->
    <script src="../local/metodos/post/form_cadastro.js"></script>

    <script>
        $(document).ready(function () {
            //md.checkFullPageBackgroundImage();
            setTimeout(function () {
                // after 1000 ms we add the class animated to the login/register card
                $('.card').removeClass('card-hidden');
            }, 400);
        });
    </script>

    <script>
        $(function () {
            $('select').selectpicker();
        });
    </script>

    <script>
       
    </script>
    
    <script>
        function onChangeCNPJ(elemento) {
            var cnpj = document.getElementById("cnpj").value;
            if (cnpj) {
                //console.log("Qual o CNPJ? ")
                cnpj=cnpj.replace(/\./g, "").replace(/-/g, "").replace(/\//g, "")

                if (cnpj.length == 14) {
                    //console.log("esse é o cnpj=", cnpj)
                    $.ajax({
                        url: '/antecipados/get-cnpj',
                        type: 'POST',
                        data: {
                            'cnpj': cnpj
                        }
                    }).done(function (response) {
                        if (response) {
                            $("#new_razao").val(response.razao_social);
                            /* $("#new_nome_fantasia").val(response.nome_fantasia);
                            $("#new_cidade").val(response.municipio);
                            $('#new_cep').val(response.cep)
                            $('#new_endereco').val(`${response.logradouro + ', ' + response.numero + ', ' + response.bairro + ', ' + response.municipio + ' - ' + response.uf}`)
                            $('#new_numero').val(response.numero); */

                        } else {
                            $("#new_razao").val('');
                            /* $("#new_nome_fantasia").val('');
                            $("#new_cidade").val('');
                            $('#new_cep').val('');
                            $('#new_endereco').val('');
                            $('#new_numero').val('') */
                        }
                    })
                } else {
                    var textmsg = 'O CNPJ deve ter 14 digitos!';
                    Swal.fire({
                        position: 'center',
                        icon: 'info',
                        title: textmsg,
                        showConfirmButton: false,
                        timer: 2000
                    });

                }
            }
        }
    </script>

    <script>
    $(document).ready(function () {
            function criaToast(icon, response) {
                Swal.fire({
                    customClass: {
                        confirmButton: 'btn btn-black',
                    },
                    title: response,
                    icon: icon,
                })
            }

            $("#formulario_agendamento").submit(function (e) {
                e.preventDefault();
                var post_url = $(this).attr("action");
                var request_method = $(this).attr("method");
                var form_data = $(this).serialize();
                $.ajax({
                    async: "false",
                    url: post_url,
                    type: request_method,
                    data: form_data
                }).done(function (response) {
                    var {msg, error, status} = response;
                    var gif = "";

                    error ? gif='warning' : gif='success';
                    status? gif='success' : gif='warning';

                    Swal.fire({
                        customClass: {
                            confirmButton: 'btn btn-black',
                        },
                        position: 'center',
                        icon: gif,
                        title: msg,
                        showConfirmButton: true,
                        confirmButtonText: "OK"
                    }).then((result) => {
                     if (result.isConfirmed && msg == 'Agendamento realizado com sucesso!') {
                         redirectURL('/', 10);
                     } 
                    });

                });

                const redirectURL = async (url, time) => {
                    setTimeout(function () {
                        window.location.replace(url);
                    }, time)
                }

                const reloadPage = async (time) => {
                    setTimeout(function () {
                        window.location.reload();
                    }, time)
                }

            });

        })
        </script>

    <script>
        var TxtRotate = function (el, toRotate, period) {
            this.toRotate = toRotate;
            this.el = el;
            this.loopNum = 0;
            this.period = parseInt(period, 10) || 2000;
            this.txt = '';
            this.tick();
            this.isDeleting = false;
        };

        TxtRotate.prototype.tick = function () {
            var i = this.loopNum % this.toRotate.length;
            var fullTxt = this.toRotate[i];

            if (this.isDeleting) {
                this.txt = fullTxt.substring(0, this.txt.length - 1);
            } else {
                this.txt = fullTxt.substring(0, this.txt.length + 1);
            }

            this.el.innerHTML = '<span class="wrap">' + this.txt + '</span>';

            var that = this;
            var delta = 300 - Math.random() * 100;

            if (this.isDeleting) {
                delta /= 2;
            }

            if (!this.isDeleting && this.txt === fullTxt) {
                delta = this.period;
                this.isDeleting = true;
            } else if (this.isDeleting && this.txt === '') {
                this.isDeleting = false;
                this.loopNum++;
                delta = 500;
            }

            setTimeout(function () {
                that.tick();
            }, delta);
        };

        window.onload = function () {
            var elements = document.getElementsByClassName('txt-rotate');
            for (var i = 0; i < elements.length; i++) {
                var toRotate = elements[i].getAttribute('data-rotate');
                var period = elements[i].getAttribute('data-period');
                if (toRotate) {
                    new TxtRotate(elements[i], JSON.parse(toRotate), period);
                }
            }
            // INJECT CSS
            var css = document.createElement("style");
            css.type = "text/css";
            css.innerHTML = ".txt-rotate > .wrap { border-right: 0.08em solid #666 }";
            document.body.appendChild(css);
        };
    </script>

    <script>
    
        function CPF(){"user_strict";function r(r){for(var t=null,n=0;9>n;++n)t+=r.toString().charAt(n)*(10-n);var i=t%11;return i=2>i?0:11-i}function t(r){for(var t=null,n=0;10>n;++n)t+=r.toString().charAt(n)*(11-n);var i=t%11;return i=2>i?0:11-i}var n="CPF Inválido",i="CPF Válido";this.gera=function(){for(var n="",i=0;9>i;++i)n+=Math.floor(9*Math.random())+"";var o=r(n),a=n+"-"+o+t(n+""+o);return a},this.valida=function(o){for(var a=o.replace(/\D/g,""),u=a.substring(0,9),f=a.substring(9,11),v=0;10>v;v++)if(""+u+f==""+v+v+v+v+v+v+v+v+v+v+v)return n;var c=r(u),e=t(u+""+c);return f.toString()===c.toString()+e.toString()?i:n}}

        var CPF = new CPF();

        $("#cpf").keypress(function(){
            $(this).css("background", "#fff");
        });

        /* $("#cpf").blur(function(){
            if(CPF.valida($(this).val()) == "CPF Inválido"){
                $(this).val("")
                $(this).css("background", "#fff898");
                $(this).attr("placeholder", "Insira um CPF válido.")
            } 
        }); */

    </script>
</body>

</html>