<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../images/icon/apple-icon-mezzomo.png">
    <link rel="icon" type="image/png" href="../images/icon/favicon_mezzomo3.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        Robotax: Gerênciar Escritorios
    </title>
    <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />

    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="../assets/css/material-dashboard.min.css?v=2.1.2" rel="stylesheet" />
    <!--local CSS -->
    <link rel="stylesheet" type="text/css" href="../local/escritorios.css">
    <!-- <link href="../../public/local/plugins/dropzone/css/style_clientes.css" rel="stylesheet">-->
    <script src="../assets/js/core/jquery-3.5.1.js"></script>



</head>

<body class="">
    <div class="wrapper">
        <!-- Navbar -->
        <div class="sidebar" data-color="yellow" data-background-color="black" data-image="../assets/img/contabeisbw.jpg">
            <!--
          Tip 1: You can change the color of the sidebar using: data-color="purple | azure | green | orange | danger"

          Tip 2: you can also add an image using data-image tag
      -->
            <div class="sidebar-wrapper">
                <ul class="nav">
                    <!--CARD NO SIDE BAR - LOGO DO USÚARIO E NOME -->

                    {{> escritorio/navbar_suporte}}
                    <li class="nav-item ">
                        <a class="nav-link" href="/suporte/sair">
                            <i class="material-icons">exit_to_app</i>
                            <p>Sair</p>
                        </a>
                    </li>

                </ul>
            </div>
        </div>
        <!--MAIN PANEL-->
        <div class="main-panel">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
                <div class="container-fluid">
                    <div class="navbar-wrapper">
                        <div class="navbar-minimize">
                            <button id="minimizeSidebar" class="btn btn-just-icon btn-white btn-fab btn-round">
                  <i class="material-icons text_align-center visible-on-sidebar-regular">more_vert</i>
                  <i class="material-icons design_bullet-list-67 visible-on-sidebar-mini">view_list</i>
                </button>
                        </div>
                        <a class="navbar-brand" href="/gerenciar/aprovar-itens">Gerênciar Escritórios</a>
                    </div>

                    {{> escritorio/help_btn}}



                    <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
              <span class="sr-only">Toggle navigation</span>
              <span class="navbar-toggler-icon icon-bar"></span>
              <span class="navbar-toggler-icon icon-bar"></span>
              <span class="navbar-toggler-icon icon-bar"></span>
            </button>
                </div>
            </nav>
            <!-- End Navbar -->
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">

                            <div class="card">
                                <div class="card-header card-header-info2">
                                    <h4 class="card-title">Tabela de Escritórios</h4>
                                    <p class="card-category">Altere os atributos dos escritórios através do botão editar</p>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-12 col-lg-12">
                                            <div class="table-responsive box drag">
                                                <table id="tabela-escritorios" class="table display table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                    <thead>
                                                        <tr class="table-header">
                                                            <th width="44px">
                                                                <div class="form-check">
                                                                    <label class="form-check-label">
                                      <input id="checkall" name="checkbox" onchange="marcartodos()"
                                        class="form-check-input form-check-input-blank" type="checkbox" value="">
                                      <span class="form-check-sign">
                                        <span class="check"></span>
                                      </span>
                                    </label>
                                                                </div>
                                                            </th>
                                                            <th>ID</th>

                                                            <th class="text-center  min-width-80">CNPJ</th>
                                                            <th class="text-center  min-width-80">Razão Social</th>
                                                            <th class="text-center  min-width-80">Nome Fantasia</th>
                                                            <th class="text-center  min-width-80">Endereço</th>
                                                            <th class="text-center  min-width-80">CEP</th>
                                                            <th class="text-center  min-width-80">Número</th>
                                                            <th class="text-center  min-width-80">Nome Responsavel</th>
                                                            <th class="text-center  min-width-80">Email Responsavel</th>
                                                            <th class="text-center  min-width-80">Telefone</th>
                                                            <th class="text-center  min-width-80">ERP</th>
                                                            <th class="text-center  min-width-80">Power BI</th>
                                                            <th class="text-center  min-width-80">Situação</th>
                                                            <th class="text-center  min-width-80">Data Inicio</th>
                                                            <th class="text-center  min-width-80">Plano</th>
                                                            <th class="text-center  min-width-80">Produto 1</th>
                                                            <th class="text-center  min-width-80">Produto 2</th>
                                                            <th class="text-center  min-width-80">Produto 3</th>
                                                            <th class="text-center  min-width-80">Produto 4</th>
                                                            <th class="text-right td-actions" width="60px">
                                                                <button id="tbl_th_btn_editarselecionados" name="tbl_th_btn_editarselecionados" type="button" rel="tooltip" class="btn btn-warning" disabled>
                                    <i class="material-icons">edit</i>
                                  </button>

                                                                <!--
                                  <button id="tbl_th_btn_adicionar" name="tbl_th_btn_adicionar" type="button"
                                    class="btn btn-success">
                                    <i class="material-icons">playlist_add</i>
                                  </button>
                                  -->
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card">


                                <div class="card-header card-header-yellow">
                                    <h4 class="card-title">Consumo</h4>
                                    <p class="card-category">Dados do processamento das notas</p>
                                </div>
                                <div class="card-body">

                                    <div class="row">

                                        <div class="col-md-4 card-body-input">

                                            <div class="input-group form-group input-card-border">
                                                <label class="bmd-label-floating">Selecione o Escritório</label>
                                                <input id="nomeBuscadoEscritorios" name="nomeBuscadoEscritorios" type="text" class="form-control" required autocomplete="off" value="">
                                            </div>

                                            <div id="auto"></div>

                                            <span class="suggestions_local" id="suggestions_span_escritorio"></span>

                                        </div>



                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="card card-chart ">
                                                <div class="card-header card-header-success">
                                                    <div class="planocard" id="planocard">
                                                        <h4>Plano do Escritório</h4>
                                                    </div>
                                                </div>
                                                <div class="card-body">
                                                    <h4 class="card-title" id="plano_escritorio"></h4>
                                                    <p class="card-category" id="plano_escritorio_detalhes">
                                                        Plano atual do Escritório
                                                    </p>
                                                </div>
                                                <div class="card-footer">
                                                    <div class="stats">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="card card-chart">
                                                <div class="card-header card-header-success">
                                                    <div class="consumototal" id="consumototal">
                                                        <h4>Consumo Total</h4>
                                                    </div>
                                                </div>
                                                <div class="card-body">
                                                    <h4 class="card-title" id="consumo_total"></h4>
                                                    <p class="card-category"> Numero de notas processadas Total</p>
                                                </div>
                                                <div class="card-footer">
                                                    <div class="stats">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="card card-chart">
                                                <div class="card-header card-header-success">
                                                    <div class="consumomensal" id="consumomensal">
                                                        <h4>Consumo Mensal</h4>
                                                    </div>
                                                </div>
                                                <div class="card-body">
                                                    <h4 class="card-title" id="consumo_mensal"></h4>
                                                    <p class="card-category">Numero de notas processadas nesse Mês</p>
                                                </div>
                                                <div class="card-footer">
                                                    <div class="stats">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">

                                            <div class="toolbar">

                                                <button id="one_month" class="active btn">
                                                    Mês Atual
                                                    </button>

                                                <button id="all" class="btn">
                                                    Geral
                                                    </button>

                                            </div>

                                            <div id="chart">

                                            </div>

                                        </div>
                                    </div>
                                </div>


                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <!--FOOTER-->
            {{> escritorio/footer_internal}}

            <!-- MODAL - Modal_Cliente-->
            <form id="update_form_escritorio" method="post" action="/suporte/update-escritorio">
                <div class="modal fade" id="EditModal_Escritorio" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Atualizar dados do Escritório</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                            </div>
                            <div class="modal-body">
                                <div class="form">
                                    <div class="row">
                                        <input id="id_modal" name="id_escritorio" type="hidden">

                                        <div class="form-group col-md-6">
                                            <h6 class="label-modal">Cliente (Razão Social)</h6>
                                            <input id="razao_social_modal" name="razao_social" type="text" class="form-control">
                                        </div>
                                        <div class="form-group col-md-6">
                                            <h6 class="label-modal">Nome Fantasia</h6>
                                            <input id="nome_fantasia_modal" name="nome_fantasia" type="text" class="form-control">
                                        </div>
                                        <div class="col-sm-6 col-md-12 col-lg-6">
                                            <h6 class="label-modal">CNPJ</h6>
                                            <input id="cnpj_linha_modal" name="cnpj" type="text" class="form-control">
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-sm-6 col-md-12 col-lg-7">
                                            <h6 class="label-modal">Endereço</h6>
                                            <input id="endereco_modal" name="endereco" type="text" class="form-control">
                                        </div>
                                        <div class="col-sm-6 col-md-12 col-lg-2">
                                            <h6 class="label-modal">Número</h6>
                                            <input id="numero_modal" name="numero" type="text" class="form-control">
                                        </div>
                                        <div class="col-sm-6 col-md-12 col-lg-3">
                                            <h6 class="label-modal">CEP</h6>
                                            <input id="cep_modal" name="cep" type="text" class="form-control">
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-sm-6 col-md-12 col-lg-4">
                                            <h6 class="label-modal">Nome do Responsável</h6>
                                            <input id="nome_responsavel_modal" name="nome_responsavel" type="text" class="form-control">
                                        </div>

                                        <div class="col-sm-6 col-md-12 col-lg-4">
                                            <h6 class="label-modal">Email do Responsável</h6>
                                            <input id="email_responsavel_modal" name="email_responsavel" type="text" class="form-control">
                                        </div>

                                        <div class="col-sm-6 col-md-12 col-lg-4">
                                            <h6 class="label-modal">Telefone</h6>
                                            <input id="telefone_modal" name="telefone" type="text" class="form-control">
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-sm-6 col-md-12 col-lg-3">
                                            <h6 class="label-modal">Data de Início</h6>
                                            <input id="data_inicio_modal" name="data_inicio" type="text" class="form-control">
                                        </div>

                                        <div class="col-sm-6 col-md-12 col-lg-2">
                                            <h6 class="label-modal">Plano</h6>
                                            <input id="plano_modal" name="plano" type="text" class="form-control">
                                        </div>

                                        <div class="col-sm-6 col-md-12 col-lg-3">
                                            <h6 class="label-modal">Power BI</h6>
                                            <input id="bi_modal" name="bi" type="text" class="form-control">
                                        </div>

                                        <div class="col-sm-6 col-md-12 col-lg-4">
                                            <h6 class="label-modal">ERP</h6>
                                            <select title='SELECIONE UMA OPÇÃO' class="form-control selectpicker" data-style="btn btn-link" id="regime_linha_modal" name="erp" type="text">
                        <option value="questor">Questor</option>
                        <option value="cyss">CYSS</option>
                        <option value="dominio">Domínio</option>  
                      </select>
                                        </div>
                                        <div class="col-md-12">
                                            <h6 class="label-modal">Situação <em> (obrigatório)</em></h6>
                                            <div class="form-check form-check-radio">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="status" value="Ativa" id="status_radio_linha_ativo">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="status" value="Inativa" id="status_radio_linha_inativo">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="label-modal">Produto 1</h6>
                                            <div class="form-check form-check-radio" id="prod1_linha_modal">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod1" value="1" id="prod1_ativo">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod1" value="0" id="prod1_inativo">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <h6 class="label-modal">Produto 2</h6>
                                            <div class="form-check form-check-radio" id="prod2_linha_modal">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod2" value="1" id="prod2_ativo">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod2" value="0" id="prod2_inativo">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <h6 class="label-modal">Produto 3</h6>
                                            <div class="form-check form-check-radio" id="prod3_linha_modal">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod3" value="1" id="prod3_ativo">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod3" value="0" id="prod3_inativo">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <h6 class="label-modal">Produto 4</h6>
                                            <div class="form-check form-check-radio" id="prod4_linha_modal">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod4" value="1" id="prod4_ativo">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod4" value="0" id="prod4_inativo">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn" data-dismiss="modal">Cancelar</button>
                                <button type="submit" class="btn" id="btn_salvar_modal">SALVAR</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <!-- MODAL - Aprovar_Itens Modal - FIM-->



            <!-- MODAL - UPDATE_Multiplos_Itens-->
            <form id="update_form_escritorio_multiplos" method="post" action="/suporte/update-escritorio-multiplos">
                <div class="modal fade" id="EditModal_Escritorios_Multiplos" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Cuidado ao Preencher </h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">

                                    <input id="ids_modal_multiplos" name="ids_multiplos" type="hidden">

                                    <div class="col-md-12">
                                        <h6 class="label-modal">Plano</h6>
                                        <input id="plano_modal" name="plano" type="text" class="form-control">
                                    </div>
                                    <hr>
                                    <div class="col-md-12">
                                        <h6 class="label-modal">Situação <em> (obrigatório)</em></h6>
                                        <div class="form-check form-check-radio">
                                            <label class="form-check-label">
                          <input class="form-check-input" type="radio" name="status_mult" value="Ativa">
                          Ativa
                          <span class="circle">
                            <span class="check"></span>
                          </span>
                        </label>
                                            <label class="form-check-label">
                          <input class="form-check-input" type="radio" name="status_mult" value="Inativa">
                          Inativa
                          <span class="circle">
                            <span class="check"></span>
                          </span>
                        </label>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <h6 class="label-modal">Produto 1</h6>
                                            <div class="form-check form-check-radio">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod1" value="1">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod1" value="0">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <h6 class="label-modal">Produto 2</h6>
                                            <div class="form-check form-check-radio">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod2" value="1">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod2" value="0">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <h6 class="label-modal">Produto 3</h6>
                                            <div class="form-check form-check-radio">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod3" value="1">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod3" value="0">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <h6 class="label-modal">Produto 4</h6>
                                            <div class="form-check form-check-radio">
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod4" value="1">
                            Ativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                                <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="prod4" value="0">
                            Inativa
                            <span class="circle">
                              <span class="check"></span>
                            </span>
                          </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn" data-dismiss="modal">Cancelar</button>
                                <button type="submit" class="btn" id="salvardata">SALVAR</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <!-- MODAL - UPDATE_Multiplos_Itens Modal - FIM-->

        </div>
        <!--MAIN PANEL_X-->

    </div>

    <!--Correção do Violation Scroll non-passive event-->
    <script src=" ../local/plugins/fix-non-passive.js"></script>
    <!--   Core JS Files   -->
     <script src="../assets/js/core/popper.min.js"></script>
    <script src="../assets/js/core/bootstrap-material-design.js"></script>
    <script src="../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
    <!-- Plugin for the momentJs  -->
    <script src="../assets/js/plugins/moment.min.js"></script>
    <!-- Plugin for the momentJs TRADUÇÕES LOCAIS  -->
    <script src="../assets/js/plugins/moment-with-locales.js"></script>

    <!-- Forms Validations Plugin -->
    <script src="../assets/js/plugins/jquery.validate.min.js"></script>
    <!-- Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
    <script src="../assets/js/plugins/jquery.bootstrap-wizard.js"></script>
    <!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
    <script src="../assets/js/plugins/bootstrap-selectpicker.js"></script>
    <!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
    <script src="../assets/js/plugins/bootstrap-datetimepicker.min.js"></script>
    <!--  DataTables.net Plugin, full documentation here: https://datatables.net/  -->
    <script src="../assets/js/plugins/jquery.dataTables.min.js"></script>
    <!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
    <script src="../assets/js/plugins/bootstrap-tagsinput.js"></script>
    <!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
    <script src="../assets/js/plugins/jasny-bootstrap.min.js"></script>
    <!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
    <script src="../assets/js/plugins/fullcalendar.min.js"></script>
    <!-- Vector Map plugin, full documentation here: http://jvectormap.com/documentation/ -->
    <script src="../assets/js/plugins/jquery-jvectormap.js"></script>
    <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
    <script src="../assets/js/plugins/nouislider.min.js"></script>
    <!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
    <!-- Library for adding dinamically elements -->
    <script src="../assets/js/plugins/arrive.min.js"></script>
    <!-- Chartist JS -->
    <script src="../assets/js/plugins/chartist.min.js"></script>
    <!--  Notifications Plugin    -->
    <script src="../assets/js/plugins/bootstrap-notify.js"></script>

    <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="../assets/js/material-dashboard.min.js?v=2.1.2" type="text/javascript"></script>


    <!--SWEET ALERT-->
    <!--LOCAL-->
    <script src="../local/plugins/sweetalert/js/sweetalert2.min.js"></script>
    <link rel="stylesheet" href="../local/plugins/sweetalert/css/sweetalert2.min.css" id="theme-styles">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="../local/plugins/drag/drag.js"></script>
    <script src="../local/plugins/mascara/abreviaNumero.js"></script>

        <script type="text/javascript">
        $(document).ready(function() {
            //ACTIVE NAV-ITEM
            var navs = document.getElementsByClassName('nav-item');
            for (var x = 0; x < navs.length; x++) {
                console.log(navs[x].childNodes[1].attributes[1].nodeValue, location.pathname)
                if (navs[x].childNodes[1].attributes[1].nodeValue == location.pathname) {
                    var nav = navs[x];
                    $(nav).addClass('active');
                }
            }
                   
        });
    </script>
    
    <!-- CRIPT PARA BUSCAR DADOS DO CONSUMO TOTAL -->

    <script>
        const LoadConsumoTotal = async(nomeEscritorio) => {
            //console.log("entrou em load consumo total com o escritorio ===>", nomeEscritorio)
            $.ajax({
                async: true,
                url: '/suporte/post-count-consumototal',
                type: 'POST',
                data: {
                    "escritorio_input": nomeEscritorio
                }
            }).done(function(response) {
                if (response) {

                    console.log("dados ===========>", response)

                    if (response.consumo_total) {
                        abreviaNumero(response.consumo_total).then(async(result) => $('#consumo_total').text(result))
                    } else {
                        $('#consumo_total').text('0')
                    }

                    if (response.consumo_mensal) {
                        abreviaNumero(response.consumo_mensal).then(async(result) => $('#consumo_mensal').text(result))
                            //Atualiza os dados do plano
                    } else {
                        $('#consumo_mensal').text('0')
                    }

                    if (response.plano) {
                        $('#plano_escritorio').text(response.plano)
                    } else {
                        $('#plano_escritorio').text('GOLD')
                    }

                } else {

                }

            });
        }
    </script>


    <script>
        //-------------------------------------------------------------------DEFINIÇPÇÕES DA TABELA
        document.querySelector("#nomeBuscadoEscritorios").addEventListener("keyup", handleKeyUp)

        //variável do gráfico
        var chart;
        var arrayDados = []
        var time = 0;
        let textinput = "";

        function handleKeyUp(event) {
            const keysNotAccepted = [13, 39, 37, 40, 38]
            var keyPressed = ''
            keyPressed = event.keyCode || event.which;

            if (!keysNotAccepted.includes(keyPressed)) {
                clearTimeout(time)
                time = setTimeout(() => {
                    textinput = event.target.value
                    fetchsuggestions(textinput)
                }, 700)

            }
        }

        function fetchsuggestions(text) {
            $.ajax({
                //async: true,
                url: '/suporte/fetchsuggestions',
                type: 'post',
                data: {
                    "fetchescritorio_name": text
                }
            }).done(function(response) {
                let suggestions = JSON.parse(response)
                    //console.log("o que temos =============>", suggestions)
                handleSuggetions(suggestions)
            });

        }


        function handleSuggetions(suggestions) {
            //var arraySuggestions = suggestions;
            var selectedSuggestionIndex = -1;
            const searchInput = document.querySelector('#nomeBuscadoEscritorios');
            const suggestionsPanel = document.querySelector('#suggestions_span_escritorio');

            function resetSelectedSuggestion() {
                for (var i = 0; i < suggestionsPanel.children.length; i++) {
                    suggestionsPanel.children[i].classList.remove('selected');
                }
            }
            suggestionsPanel.classList.add('show');
            const input = searchInput.value;
            suggestionsPanel.textContent = '';

            //const suggestions = arraySuggestions.filter(function (data) {
            //consoleconsole.log("nomepj? ", arraySuggestions[0].Nome_Pj_Emitente)
            //    return data[0].Nome_Pj_Emitente.toLowerCase().indexOf(input.toLowerCase()) > -1;
            //});

            // Nome_Pj_Emitente.toLowerCase(input.toLowerCase());

            suggestions.forEach(function(suggested) {
                const div = document.createElement('div');
                div.textContent = suggested.nome_fantasia;
                div.setAttribute('class', 'suggestion');
                suggestionsPanel.appendChild(div);
            });
            if (input === '') {
                suggestionsPanel.textContent = '';
            }





            function ControlSelectedSuggestion(keyCommand) {

                const acceptedKeys = {
                    ArrowUp() {
                        //console.log("Arrou uppp")
                        resetSelectedSuggestion();
                        selectedSuggestionIndex = (selectedSuggestionIndex > 0) ? selectedSuggestionIndex - 1 : 0;
                        suggestionsPanel.children[selectedSuggestionIndex].classList.add('selected');
                        return;
                    },
                    ArrowDown() {
                        //console.log("Arrou DOWN")
                        resetSelectedSuggestion();
                        selectedSuggestionIndex = (selectedSuggestionIndex < suggestionsPanel.children.length - 1) ? selectedSuggestionIndex + 1 : suggestionsPanel.children.length - 1;
                        suggestionsPanel.children[selectedSuggestionIndex].classList.add('selected');
                        return;
                    },
                    Enter() {
                        searchInput.value = suggestionsPanel.children[selectedSuggestionIndex].textContent;
                        suggestionsPanel.classList.remove('show');
                        selectedSuggestionIndex = -1;
                        fetchDataByEscritorio(searchInput.value)
                        return;
                    }

                }

                const keyPressed = keyCommand
                const actionFunction = acceptedKeys[keyCommand]
                if (actionFunction) {
                    actionFunction()
                }
            }

            searchInput.addEventListener('keyup', function(e) {
                // console.log("searchInput.addEventListener===>>>", e.key)

                ControlSelectedSuggestion(e.key)

                /*
                if (e.key === 'ArrowDown') {
                    console.log("===>>>", e.key)
                    resetSelectedSuggestion();
                    selectedSuggestionIndex = (selectedSuggestionIndex < suggestionsPanel.children.length - 1) ? selectedSuggestionIndex + 1 : suggestionsPanel.children.length - 1;
                    suggestionsPanel.children[selectedSuggestionIndex].classList.add('selected');
                    return;
                }
                if (e.key === 'ArrowUp') {
                    console.log("===>>>", e.key)
                    resetSelectedSuggestion();
                    selectedSuggestionIndex = (selectedSuggestionIndex > 0) ? selectedSuggestionIndex - 1 : 0;
                    suggestionsPanel.children[selectedSuggestionIndex].classList.add('selected');
                    return;
                }
                if (e.key === 'Enter') {
                    console.log("===>>>", e.key)
                    searchInput.value = suggestionsPanel.children[selectedSuggestionIndex].textContent;
                    suggestionsPanel.classList.remove('show');
                    selectedSuggestionIndex = -1;

                    fetchDataByEscritorio(searchInput.value)
                    return;
                }
                */

            });





            const optionsSuggestions = document.getElementsByClassName('suggestion')


            for (var i = 0; i < optionsSuggestions.length; i++) {
                optionsSuggestions[i].addEventListener('click', function(e) {
                    //console.log("CLICK ON", e.target.textContent)
                    searchInput.value = e.target.textContent;
                    //valor selecionado no console abaixo

                    let escritorioSelecionado = e.target.textContent
                    suggestionsPanel.classList.remove('show');
                    //console.log("o que tem no e ==== >", e)
                    fetchDataByEscritorio(escritorioSelecionado)

                })

            }
            /*

            $(optionsSuggestions).each(function(SuggestionItem) {

                console.log("sfdsafsf ", SuggestionItem)

                SuggestionItem.addEventListener('click', function(e) {
                console.log("sugestttt clicado ", SuggestionItem)

                })

            })

            */

            /*
                        document.addEventListener('click', function(e) {
                            console.log("===>>>CLICADO")
                            if (e.target.className === 'suggestion') {
                                console.log("===>>>CLICADO suggestion")
                                searchInput.value = e.target.textContent;
                                //valor selecionado no console abaixo

                                let escritorioSelecionado = e.target.textContent
                                suggestionsPanel.classList.remove('show');
                                //console.log("o que tem no e ==== >", e)
                                fetchDataByEscritorio(escritorioSelecionado)
                            }
                        });
            */

        }

        function criaGraficoConsumo() {
            var options = {
                series: [],
                chart: {
                    id: 'area-datetime',
                    type: 'area',
                    height: 350,
                    toolbar: {
                        show: true,
                        offsetX: 0,
                        offsetY: 0,
                        tools: {
                            download: true,
                            selection: true,
                            zoom: true,
                            zoomin: true,
                            zoomout: true,
                            pan: true,
                            customIcons: []
                        },

                    },
                    zoom: {
                        autoScaleYaxis: true
                    }
                },
                annotations: {

                    yaxis: [

                        {
                            y: 4000,
                            borderColor: '#272727',
                            label: {
                                show: true,
                                text: 'Plano Alpha',
                                style: {
                                    color: "#fff",
                                    background: '#272727'
                                }
                            }
                        }, {
                            y: 30000,
                            borderColor: '#272727',
                            label: {
                                show: true,
                                text: 'Plano Beta',
                                style: {
                                    color: "#fff",
                                    background: '#272727'
                                }
                            }
                        },
                    ],


                    /*
                    xaxis: [{
                      x: new Date('14 Nov 2012').getTime(),
                      borderColor: '#999',
                      yAxisIndex: 0,
                      label: {
                        show: true,
                        text: 'Plano A',
                        style: {
                          color: "#fff",
                          background: '#775DD0'
                        }
                      }
                    }]
                    */
                },

                dataLabels: {
                    enabled: false
                },
                markers: {
                    size: 0,
                    style: 'hollow',
                },
                yaxis: {
                    title: {
                        text: 'Notas Processadas',
                    }
                },
                xaxis: {
                    type: 'datetime',
                    min: '',
                    title: {
                        text: 'Dia/Mês',
                    },
                    tickAmount: 7,
                },
                tooltip: {
                    x: {
                        format: 'dd MM yyyy'
                    }
                },
                fill: {
                    colors: ['#edcd00'],
                    type: 'gradient',
                    gradient: {
                        shadeIntensity: 1,
                        opacityFrom: 0.7,
                        opacityTo: 0.9,
                        stops: [0, 100]
                    }
                },
                colors: ['#edcd00']

            };

            chart = new ApexCharts(document.querySelector("#chart"), options);
            chart.render();

        }

        //requested_escritorio
        //var x = 0

        const atualizaGraficoConsumo = async(chartData) => {

            if (chartData.length > 0) {

                var sum_notas = chartData.map(a => a.sum_notas);
                var inserido = chartData.map(b => b.inserido);
                var mes_atual = chartData.map(c => c.mes_atual)

                arrayDados = []

                for (i = 0; i < sum_notas.length; i++) {
                    arrayDados[i] = {
                        "x": inserido[i],
                        "y": sum_notas[i]
                    }

                    if (arrayDados.length == sum_notas.length) {
                        chart.updateOptions({
                            series: [{
                                data: arrayDados
                            }],

                            xaxis: {
                                type: 'datetime',
                                min: inserido[0],
                                title: {
                                    text: 'Dia/Mês',
                                },
                                tickAmount: 7,
                            }
                        })

                    }

                }

            } else {
                chart.updateSeries([{
                    data: []
                }])
            }




        }


        function fetchDataByEscritorio(nomeEscritorio) {

            //console.log("chamando os dados do gráfico", nomeEscritorio)

            $.ajax({
                //async: true,
                url: '/suporte/get-consumo-notas-byescritorio',
                type: 'post',
                data: {
                    "requested_escritorio": nomeEscritorio
                }
            }).done(function(response) {
                if (response) {

                    LoadConsumoTotal(nomeEscritorio);
                    chartData = response.dataChart

                    var sum_notas = chartData.map(a => a.sum_notas);
                    var inserido = chartData.map(b => b.inserido);
                    var mes_atual = chartData.map(c => c.mes_atual)

                    if (inserido[inserido.length - 1] < mes_atual[0]) {
                        mes_atual[0] = inserido[inserido.length - 29]
                    }

                    atualizaGraficoConsumo(chartData);

                    var resetCssClasses = function(activeEl) {
                        var els = document.querySelectorAll('button')
                        Array.prototype.forEach.call(els, function(el) {
                            el.classList.remove('active')
                        })

                        activeEl.target.classList.add('active')
                    }

                    document
                        .querySelector('#one_month')
                        .addEventListener('click', function(e) {
                            resetCssClasses(e)
                            chart.zoomX(mes_atual[0], inserido[inserido.length - 1])
                        })

                    document.querySelector('#all').addEventListener('click', function(e) {
                        resetCssClasses(e)

                        chart.zoomX(inserido[0], inserido[inserido.length - 1])
                    })



                } //-------------- fim if response -------------------
            });

        }




        $(document).ready(function() {
            criaGraficoConsumo();

        });
    </script>

    <!--local-->
    <!-- AJAX JQUERY POST FORM
    <script src="../local/metodos/post/update_modal_aprovar_itens.js"></script> -->
    <!-- AJAX JQUERY POST UPDATE update_form_pendente MODAL  <script src="../local/metodos/post/update_input_aprovar_notas.js"></script> -->

    <!--MASK FOR FORMS-->
    <script src="../local/plugins/mask_input/jquery.maskedinput.js"></script>

    <!-- HANDLE SELECT BoxeS ON TABLE
    <script src="../assets/js/plugins/datatables_select_rows.js"></script> -->

    <!-- HANDLE CheckBoxes
    <script src="../local/metodos/post/update_aprovar_itens_selecionados.js" type="text/javascript"> </script>
  -->

    <!-- HANDLE CheckBoxes
    <script src="../local/metodos/post/update_aprovar_itens_selecionados.js" type="text/javascript"> </script>
  -->

    <!---------------------------------IMPORTS PARA APEX CHARTS -------------------------------->
    <script src="../local/plugins/apexchart/apexchart.js"></script>

    <link rel="stylesheet" href="../local/graficos.css">

    <!---------------------------------IMPORTS PARA APEX CHARTS -------------------------------->

    <!-------------------------           GRÁFICO NOTAS         -------------------------------->

    <!-- ACTIVE NAV-ITEM -->


    <script>
        var TabelaClientes; //TABELA E SUAS CONFIGS

        //____________________________________DOCUMENT READY_________________________________________
        $(document).ready(function() {
            //-------------------------------------------------------------------DEFINIÇPÇÕES DA TABELA
            TabelaClientes = $('#tabela-escritorios').DataTable({
                destroy: true,
                deferRender: false,
                processing: true,
                ajax: {
                    url: '/suporte/get-escritorios',
                    type: 'GET',
                    dataSrc: function(data) {
                        return JSON.parse(data.dataTable)
                    }
                },
                columns: [{
                        defaultContent: '<div class="form-check">' +
                            '<label class= "form-check-label" >' +
                            '<input name="checkbox" class="form-check-input checkinput" type="checkbox" value="" onchange="marcados(this.checkbox)">' +
                            '<span class="form-check-sign">' +
                            '<span class="check"></span>' +
                            '</span>' +
                            '</label> ' +
                            '</div> '
                    }, //CHECKBOXES
                    {
                        data: "id_escritorio"
                    }, //id (hidden)
                    {
                        data: "cnpj"
                    }, //Numero do Chamado
                    {
                        data: "razao_social"
                    }, //Status
                    {
                        data: "nome_fantasia"
                    }, //DATA DE ABERTURA - INSERIDO , type: "date-eu"
                    {
                        data: "endereco"
                    }, {
                        data: "cep"
                    }, {
                        data: "numero"
                    }, {
                        data: "nome_responsavel"
                    }, {
                        data: "email_responsavel"
                    }, {
                        data: "telefone"
                    }, {
                        data: "erp"
                    }, {
                        data: "bi"
                    }, {
                        data: "status"
                    }, {
                        data: "data_inicio"
                    }, {
                        data: "plano"
                    }, {
                        data: "prod1"
                    }, {
                        data: "prod2"
                    }, {
                        data: "prod3"
                    }, {
                        data: "prod4"
                    }, {
                        defaultContent: '<button id="tbl_td_btn_editarlinha" name="tbl_td_btn_editarlinha" type="button" rel="tooltip" class= "btn btn-warning" disabled>' +
                            '<i class="material-icons">edit</i>' +
                            '</button >'
                    }
                ],
                fixedHeader: {
                    header: true,
                    footer: true
                },
                dom: 'Blftip',
                buttons: [{
                    extend: 'excel',
                    text: 'Exportar'
                }],
                pagingType: "full_numbers",
                lengthMenu: [
                    [20, 25, 50, -1],
                    [20, 25, 50, "Todos"]
                ],
                responsive: false,
                language: {
                    "url": "../assets/js/plugins/dataTables.ptbr.lang",
                    search: "_INPUT_",
                    searchPlaceholder: "",
                },
                columnDefs: [{
                        sClass: "hideIdTable",
                        "aTargets": 1
                    }, //id visivelmente oculto (presente)
                    {
                        orderable: false,
                        targets: [0, 20]
                    }, {
                        targets: 20,
                        className: 'td-actions'
                    }, {
                        targets: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
                        className: 'text-center'
                    }
                ],
                order: [
                    [2, 'asc']
                ],
                rowCallback: function(row, data) {
                    var element = $(row).find("button[name='tbl_td_btn_editarlinha']");
                    //Inicializa os botões dos rows como ativos - disabled = false
                    element.prop('disabled', false);
                    var elementCheckBoxBody = $(row).find("input[name='checkbox']");
                    //--------------------------------Habilita botão alterar data se algum check box estiver selecionado & desabilita os botões dos rows
                    elementCheckBoxBody.on("click", function() {
                        //Habilita o botão EDITAR MARCADOS (HEADER) se algum check box estiver selecionado - disabled = true
                        $("button[name='tbl_th_btn_editarselecionados']").prop('disabled', !$("input[name='checkbox']:checked").length);
                        //Desabilita os botões editar linha se algum check box estiver selecionado - disabled = true
                        $("button[name='tbl_td_btn_editarlinha']").prop('disabled', $("input[name='checkbox']:checked").length);
                        //Habilita o botão VALIDAR marcados (HEADER) se algum check box estiver selecionado - disabled = true
                        // $("button[name='tbl_th_btn_adicionar']").prop('disabled', !$("input[name='checkbox']:checked").length);
                    })
                }
            });
            //--------------------------------------------------------------------MASK PARA FORMULÁRIOS
            jQuery(function($) {
                $("#datamodal").mask("99/99/9999", {
                    placeholder: "DD/MM/AAAA"
                });
            });

        });
        //_________________________________________________________________________________________x

        //_______________________________________BOTÕES DE AÇÕES_____________________________________________
        //---------------------------------------------------------------OUVINTE DO BOTÃO EDITAR / ABRE MODAL
        $(document).on('click', '#tbl_td_btn_editarlinha', function(e) {
            e.preventDefault;
            var currentRow = $(this).closest('tr').find('td');
            const id_linha = currentRow[1].textContent
            const cnpj_linha = currentRow[2].textContent
            const razao_social_linha = currentRow[3].textContent
            const nome_fantasia_linha = currentRow[4].textContent
            const endereco_linha = currentRow[5].textContent
            const cep_linha = currentRow[6].textContent
            const numero_linha = currentRow[7].textContent
            const nome_responsavel_linha = currentRow[8].textContent
            const email_responsalvel_linha = currentRow[9].textContent
            const telefone_linha = currentRow[10].textContent
            const erp_linha = currentRow[11].textContent
            const bi_linha = currentRow[12].textContent
            const status_linha = currentRow[13].textContent
            const data_inicio_linha = currentRow[14].textContent
            const plano_linha = currentRow[15].textContent
            const prod1_linha = currentRow[16].textContent
            const prod2_linha = currentRow[17].textContent
            const prod3_linha = currentRow[18].textContent
            const prod4_linha = currentRow[19].textContent

            $('#id_modal').val(id_linha);
            $('#cnpj_linha_modal').val(cnpj_linha);
            $('#razao_social_modal').val(razao_social_linha);
            $('#nome_fantasia_modal').val(nome_fantasia_linha);
            $('#endereco_modal').val(endereco_linha);
            $('#cep_modal').val(cep_linha);
            $('#numero_modal').val(numero_linha);
            $('#nome_responsavel_modal').val(nome_responsavel_linha);
            $('#email_responsavel_modal').val(email_responsalvel_linha);
            $('#telefone_modal').val(telefone_linha);
            $('#erp_modal').val(erp_linha);
            $('#bi_modal').val(bi_linha);

            if (status_linha == 'Ativa') {
                $('#status_radio_linha_ativo').prop('checked', true);
            } else if (status_linha == 'Inativa') {
                $('#status_radio_linha_inativo').prop('checked', true);
            }

            $('#data_inicio_modal').val(data_inicio_linha);
            $('#plano_modal').val(plano_linha);

            if (prod1_linha == 'true') {
                $('#prod1_ativo').prop('checked', true);
            } else if (prod1_linha == 'false') {
                $('#prod1_inativo').prop('checked', true);
            }

            if (prod2_linha == 'true') {
                $('#prod2_ativo').prop('checked', true);
            } else if (prod2_linha == 'false') {
                $('#prod2_inativo').prop('checked', true);
            }

            if (prod3_linha == 'true') {
                $('#prod3_ativo').prop('checked', true);
            } else if (prod3_linha == 'false') {
                $('#prod3_inativo').prop('checked', true);
            }

            if (prod4_linha == 'true') {
                $('#prod4_ativo').prop('checked', true);
            } else if (prod4_linha == 'false') {
                $('#prod4_inativo').prop('checked', true);
            }

            //$(this).attr("placeholder", "Type your answer here");
            $('#EditModal_Escritorio').modal('show');
        });


        //---------------------------------------------------------------OUVINTE DO BOTÃO EDITAR ITENS / ABRE MODAL
        $(document).on('click', '#tbl_th_btn_editarselecionados', function(e) {
            e.preventDefault;
            const ids_linha = itens_selecionados
                //console.log("ids multiplos = ", itens_selecionados);

            $('#ids_modal_multiplos').val(ids_linha);
            //$(this).attr("placeholder", "Type your answer here");
            $('#EditModal_Escritorios_Multiplos').modal('show');
        });

        //____________________________________BOTÃO SALVAR MODAL_______________________________________
        //--------------------------------------------------------------AJAX POST DO BOTÃO SALVAR MODAL UPDATE CLIENTE
        $("#update_form_escritorio").submit(function(e) {
            e.preventDefault(); //prevent default action
            var post_url = $(this).attr("action"); //get form action url
            var request_method = $(this).attr("method"); //get form GET/POST method
            var form_data = $(this).serialize(); //Encode form elements for submission
            //console.log("form_data AJAX")
            //console.log(form_data);
            $.ajax({
                async: "false",
                url: post_url,
                type: request_method,
                data: form_data
            }).done(function(response) { //
                //$("#server-results").html(response);
                var gif = "";
                if (response == "Dados atualizados!") {
                    gif = "success";
                }
                if (response == "Erro ao gravar novos dados!") {
                    gif = "warning";
                }
                Swal.fire({
                    position: 'center',
                    icon: gif,
                    title: response,
                    showConfirmButton: false,
                    timer: 2000
                });
                setTimeout(function() {
                    modal_hide_Single();
                    reloadPage();
                }, 2000);
            });
        });
        //----------------------------------------------------------------------------------------x


        //--------------------------------------------------------------AJAX POST DO BOTÃO SALVAR MODAL UPDATE MULTIPLOS CLIENTES
        $("#update_form_escritorio_multiplos").submit(function(e) {
            e.preventDefault(); //prevent default action
            var post_url = $(this).attr("action"); //get form action url
            var request_method = $(this).attr("method"); //get form GET/POST method
            var form_data = $(this).serialize(); //Encode form elements for submission
            //console.log("form_data AJAX")
            //console.log(form_data);
            $.ajax({
                async: "false",
                url: post_url,
                type: request_method,
                data: form_data
            }).done(function(response) { //
                //$("#server-results").html(response);
                var gif = "";
                if (response == "Dados atualizados!") {
                    gif = "success";
                }
                if (response == "Erro ao gravar novos dados!") {
                    gif = "waning";
                }
                if (response == "Tipo Antecipado das linhas selecionadas foram atualizado!") {
                    gif = "success";
                }
                if (response == "Erro ao atualizar Tipo Antecipado!") {
                    gif = "waning";
                }
                Swal.fire({
                    position: 'center',
                    icon: gif,
                    title: response,
                    showConfirmButton: false,
                    timer: 2000
                });
                setTimeout(function() {
                    modal_hide_Multiplos();
                    reloadPage();
                }, 2000);
            });
        });
        //----------------------------------------------------------------------------------------x








        //PEGA O ID DOS ITENS MARCADOS-----------------------------------------------
        var itens_selecionados = [];

        function marcados(temp) {

            //console.log("marcados?")
            itens_selecionados = [];
            $('#tabela-escritorios :checkbox:checked').each(function(index) {
                var currentRow = this.parentNode.parentNode.parentNode.parentNode;
                var closestTr = currentRow.getElementsByTagName("td")[1];
                //var a = closestTr.className.textContent;
                if (typeof closestTr !== "undefined") {
                    itens_selecionados.push(closestTr.textContent);
                }
                //console.log("marcados????")
            });
            //console.log("quais itens: ");
            //console.log(itens_selecionados);
        }

        //SELECIONAR TODOS OS CHECK BOXs VISIVEIS
        function marcartodos() {
            $("#checkall").each(function() {
                $(".form-check-input:visible").prop("checked", $(this).prop("checked"))
                if (checkall.checked == true) {
                    marcados();
                }
                //console.log("MARQUEI TODOS OS CHECK BOX: ", itens_selecionados);
            })
        }

        //___________________________________FUNÇÕES DIVERSAS______________________________________

        //-------------------------------------------------------------------------------MODAL HIDE
        function modal_hide_Single() {
            $('#EditModal_Escritorio').modal('hide')
        }

        function modal_hide_Multiplos() {
            $('#EditModal_Escritorios_Multiplos').modal('hide')
        }
        //
        function modal_hide_InserirClientes() {
            $('#EditModal_InserirClientes').modal('hide')
        }
        //----------------------------------------------------------------------RECARREGA A PÁGINA
        function reloadPage() {
            location.reload(true);
        }

        //--------------------------------------------------------------DESMARCA TODOS OS CHECKBOXs
        function desmarcartodos() {
            //console.log("desmarcando");
            $('input[type="checkbox"]:checked').prop('checked', false);
            //Re-contar itens marcados
            marcados();
            //console.log("Itens marcado: ", itens_selecionados);
        }

        //-----------------------------QUANDO MUDAR A PAGINA DA TABELA DESMARCAR TODOS OS CHECKBOXES
        $("#tabela-escritorios").on("page.dt", function() {
            desmarcartodos();
            //console.log("1")
        }).on('search.dt', function() {
            desmarcartodos();
            //console.log("2")
        });
        //________________________________________________________________________________________x


        //--------------------------------Habilita botão alterar data se algum check box estiver selecionado & desabilita os botões dos rows
        $("input[name='checkbox']").on('change', function() {
            //Habilita o botão EDITAR MARCADOS (HEADER) se algum check box estiver selecionado - disabled = true
            $("button[name='tbl_th_btn_editarselecionados']").prop('disabled', !$("input[name='checkbox']:checked").length);
            //Desabilita os botões editar linha se algum check box estiver selecionado - disabled = true
            $("button[name='tbl_td_btn_editarlinha']").prop('disabled', $("input[name='checkbox']:checked").length);
        })
    </script>



    <script>
        $(document).ready(function() {

            var max_fields = 20; //maximum input boxes allowed
            var wrapper = $('#dinamicAppend'); //Fields wrapper
            var add_button = $('#addinputuser'); //Add button ID

            var x = 1; //initlal text box count
            $(add_button).click(function(e) { //on add input button click
                e.preventDefault();
                if (x < max_fields) { //max input box allowed
                    x++; //text box increment
                    $(wrapper).append('<!--' + x + 'º CARD-->' +
                        '<div class="card" style="padding:20px; box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.157);">' +
                        '<!--12COLUNAS-->' +
                        '<div class="row">' +
                        '<!--12colunas CARD-->' +
                        '<div class="col-lg-12">' +
                        '<div class="row">' +
                        '<div class="col-sm-11 col-md-11 col-lg-11">' + x + '#' +
                        '</div>' +
                        '<div class="col-sm-1 col-md-1 col-lg-1">' +
                        '<button type="button" class="close remove_field">' +
                        '<span aria-hidden="true">&times;</span></button>' +
                        '</div>' +
                        '<div class="col-sm-12 col-md-12 col-lg-12">' +
                        '<div class="row">' +
                        '<!--10COLUNAS-->' +
                        '<div class="col-sm-9 col-md-9 col-lg-9 ">' +
                        '<div class="row">' +
                        '<div class="col-sm-4 col-md-4 col-lg-4 ">' +
                        '<h6 class="label-modal">CNPJ</h6>' +
                        '<input  name="cnpj" type="number" step="any" class="form-control " placeholder="Digite seu CNPJ" autocomplete="off" required>' +
                        '</div>' +
                        '<div class="col-sm-4 col-md-4 col-lg-4 ">' +
                        '<h6 class="label-modal">Cliente (Razão Social)</h6>' +
                        '<input name="cliente" type="text" class="form-control " placeholder="Digite seu Nome" autocomplete="off" onkeyup="var start = this.selectionStart; var end = this.selectionEnd; this.value = this.value.toUpperCase(); this.setSelectionRange(start, end);" required>' +
                        '</div>' +

                        '<div class="col-sm-3 col-md-3 col-lg-3 ">' +
                        '<h6 class="label-modal">Senha do Certificado Digital</h6>' +
                        '<input name="senhacert" type="text" class="form-control " placeholder="Digite seu Senha" autocomplete="off" required>' +
                        '</div>' +
                        '</div>' +
                        '<div class="row">' +
                        '<div class="col-sm-4 col-md-4 col-lg-4 ">' +
                        '<h6 class="label-modal">Unidade (Cidade)</h6>' +
                        '<input name="unidade" type="text" class="form-control " placeholder="Informe sua Cidade" autocomplete="off" onkeyup="var start = this.selectionStart; var end = this.selectionEnd; this.value = this.value.toUpperCase(); this.setSelectionRange(start, end);" required>' +
                        '</div>' +
                        '<div class="col-sm-4 col-md-4 col-lg-4">' +
                        '<h6 class="label-modal">Regime Tributário</h6>' +
                        '<select  title="SELECIONE" class="form-control  selectpicker" data-style="btn btn-link" name="regime" type="text" required>' +
                        '<option required>Simples-Nacional</option>' +
                        '<option>Lucro Presumido</option>' +
                        '<option>Lucro Real</option>' +
                        '<option>CEI</option>' +
                        '<option>Imune/Isentas</option>' +
                        '</select>' +
                        '</div>' +
                        '<div class="col-sm-3 col-md-3 col-lg-3">' +
                        '<h6 class="label-modal">Situação <em>(obrigatório)</em></h6>' +
                        '<div class="form-check form-check-radio">' +
                        '<label class="form-check-label">' +
                        '<input id="name_situacao_ativa[' + x + ']" class="form-check-input " type="radio" name="situacao[' + x + ']" value="Ativa" autocomplete="off" required>Ativa<span class="circle">' +
                        '<span class="check"></span>' +
                        '</span>' +
                        '</label>' +
                        '<label class="form-check-label">' +
                        '<input id="name_situacao_inativa[' + x + ']" class="form-check-input " type="radio" name="situacao[' + x + ']" value="Inativa" autocomplete="off">Inativa<span class="circle">' +
                        '<span class="check"></span>' +
                        '</span>' +
                        '</label>' +
                        '</div>' +
                        '</div>' +
                        '</div>' +
                        '</div>' +
                        '<!--10COLUNAS-->' +
                        '<div class="col-sm-3 col-md-3 col-lg-3 ">' +
                        '<div class="row" onclick="certificado(this)">' +
                        '<div class="CERTmsg areaClick"> Certificado Digital </div>' +
                        '<label class="clickAqui"> (Clique para Inserir) </label>' +
                        '</div>' +
                        '<input id="arquivoInput" class="InputUploader" type="file" name="file" accept="application/x-pkcs12">' +
                        '</div>' +
                        '</div>' +
                        '</div>' +
                        '</div>' +
                        '<!--12colunas CARD-->' +
                        '</div>' +
                        '</div>' +
                        '<!--FIM DO' + x + 'º CARD-->');

                    $('.selectpicker').selectpicker('refresh');
                }
            });

            $(wrapper).on("click", ".remove_field", function(e) { //user click on remove text
                e.preventDefault();
                $(this).parent('div').parent('div').parent('div').parent('div').parent('div').remove();
                x--;
            })
        });
    </script>



    <!--DROPZONE CSS  -->
    <!-- <link href="../local/plugins/dropzone/css/dropzone.css" rel="stylesheet">
    <link href="../local/plugins/dropzone/css/style_clientes.css" rel="stylesheet">-->




    <!--CERTIFICADO DIGITAL INPUT FILE-->


    <script>
        //query
        /*
            $(document).ready(function () {
              var button = $('.areaClick')
              var uploader = $('.uploader')
              var images = $('.arquivo')
              var filePlace = $('.certificado')
              var fileNameplace = document.getElementById('spanfilename')
      
              button.on('click', function () {
                              uploader.click()
                            })
              uploader.on('change', function () {
                var reader = new FileReader()
                reader.onload = function (event) {
                              filePlace.empty().prepend('<div class="p12"><span class"alterar">Alterar</span></div>')
                  fileNameplace.textContent = uploader[0].files[0].name
                  console.log("files ?? ", event.target.result);
                }
              })
            })
        */
    </script>


    <script>
        function certificado(ThisArea) {
            var PreviewArea = ThisArea
            var uploader = $($(PreviewArea)[0].parentNode)[0].children[1]
            uploader.click()
            var filePlace = $(ThisArea)[0].children[0]
            var clickAqui = $(ThisArea)[0].children[1]
            $(uploader).on('change', function() {
                var FileName = $(uploader)[0].files[0]
                if (FileName != undefined) {
                    $(filePlace).empty().prepend('<div class="IconP12"></div><span class="spanFileName">' + $(uploader)[0].files[0].name + '</span><span class="spanAlterar">ALTERAR</span>')
                    $(clickAqui).empty()
                } else {
                    $(filePlace).empty().prepend('Certificado Digital')
                    $(clickAqui).empty().prepend('(Clique para Inserir)')

                }
            })
        }
    </script>



    <!-- GET DATA BY CNPJ FICOU PRA DESPOIS DA IMPLATAÇÂO DO HTTPS NÃO CONCLUIDO-->
    <script type="text/javascript">
        function getByCNPJ(ThisArea) {
            var input = ThisArea

            //console.log("input =>>", $(input)[0].value)
            //Início do Comando AJAX
            $.ajax({
                //O campo URL diz o caminho de onde virá os dados
                //É importante concatenar o valor digitado no CNPJ
                url: 'https://www.receitaws.com.br/v1/cnpj/' + $(input)[0].value,
                //Atualização: caso use java, use cnpj.jsp, usando o outro exemplo.
                //Aqui você deve preencher o tipo de dados que será lido,
                //no caso, estamos lendo JSON.
                dataType: 'json',
                //SUCESS é referente a função que será executada caso
                //ele consiga ler a fonte de dados com sucesso.
                //O parâmetro dentro da função se refere ao nome da variável
                //que você vai dar para ler esse objeto.
                success: function(resposta) {
                    //console.log("TEMOS OS DADOS: ", resposta)
                    //Confere se houve erro e o imprime
                    if (resposta.status == "ERROR") {
                        alert(resposta.message + "\nPor favor, digite os dados manualmente.");
                        $("#post #nome").focus().select();
                        return false;
                    }
                    //Agora basta definir os valores que você deseja preencher
                    //automaticamente nos campos acima.
                    $("#post #nome").val(resposta.nome);
                    $("#post #fantasia").val(resposta.fantasia);
                    $("#post #atividade").val(resposta.atividade_principal[0].text + " (" + resposta.atividade_principal[0].code + ")");
                    $("#post #telefone").val(resposta.telefone);
                    $("#post #email").val(resposta.email);
                    $("#post #logradouro").val(resposta.logradouro);
                    $("#post #complemento").val(resposta.complemento);
                    $("#post #bairro").val(resposta.bairro);
                    $("#post #cidade").val(resposta.municipio);
                    $("#post #uf").val(resposta.uf);
                    $("#post #cep").val(resposta.cep);
                    $("#post #numero").val(resposta.numero);
                }
            });

        };
    </script>
    <!-- GET DATA BY CNPJ FICOU PRA DESPOIS DA IMPLATAÇÂO DO HTTPS NÃO CONCLUIDO-->

    {{> escritorio/modal_chamados}}

</body>

</html>

</html>